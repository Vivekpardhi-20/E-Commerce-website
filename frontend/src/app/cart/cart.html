
<section class="cart-section">
  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    <span class="material-icons" style="font-size:2rem;color:#1976d2;vertical-align:middle;">shopping_cart</span>
    Loading your cart...
  </div>

  <!-- Empty Cart -->
  <div *ngIf="!loading && cartItems.length === 0" class="empty-cart">
    <span class="material-icons" style="font-size:3rem;color:#90caf9;">remove_shopping_cart</span>
    <p>Your cart is empty!</p>
    <a routerLink="/products" class="btn">Shop Products</a>
  </div>

  <!-- Cart Items Table -->
  <div *ngIf="!loading && cartItems.length > 0" class="cart-container">
    <h2>Your Cart</h2>
    <table class="cart-table">
      <thead>
        <tr>
          <th>Product</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Subtotal</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cartItems">
          <td>
            <img *ngIf="item.product?.imageUrl" [src]="getImageUrl(item.product?.imageUrl || item.imageUrl)" alt="{{ item.product?.name }}" class="cart-product-image" width="60" height="60" />
            <span style="margin-left:8px;">{{ item.product?.name }}</span>
          </td>
          <td>₹{{ item.product?.price }}</td>
          <td>
            <button (click)="decreaseQuantity(item)" [disabled]="item.quantity <= 1" title="Decrease quantity" aria-label="Decrease"><span class="material-icons">remove</span></button>
            <span style="margin:0 8px;">{{ item.quantity }}</span>
            <button (click)="increaseQuantity(item)" title="Increase quantity" aria-label="Increase"><span class="material-icons">add</span></button>
          </td>
          <td>₹{{ item.quantity * (item.product?.price || 0) }}</td>
          <td>
            <button class="remove" (click)="removeItem(item)" title="Remove from cart" aria-label="Remove"><span class="material-icons">delete</span></button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="cart-summary" style="margin-top:24px;">
      <h3><span class="material-icons" style="vertical-align:middle;color:#1976d2;">attach_money</span> Total: ₹{{ total }}</h3>
      <button class="checkout" (click)="proceedToCheckout()"><span class="material-icons">shopping_bag</span> Proceed to Checkout</button>
    </div>
  </div>
</section>
